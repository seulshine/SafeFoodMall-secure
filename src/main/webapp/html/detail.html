<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>상세정보</title>
<!-- bootstrap 3.3.7이하는 jQuery 1.x, 3.3.7이상으로 업그레이드 필요 -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- 부가적인 테마 -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

<!-- jQuery 추가 -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	
<!-- 합쳐지고 최소화된 최신 자바스크립트 -->
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style>
@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,700);
.container{
	margin-bottom: 10px;
}
#navbar{
	padding-right:20px;
}
footer{
	background: #f0f0f0;
	padding: 5px 15px 10px 15px; 
}
#nut{
	margin-top: 50px;
}

#info th{
text-align: center;
	width: 80px;
}
#nutr th{
text-align: center;
	width: 100px;
}
</style>
</head>
<body>
<nav class="navbar">
		<div class="container">
			<div id="navbar" class="navbar-collapse collapse navbar-inverse"
				aria-expanded="false" style="height: 1px;">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#">Login</a></li>
					<li><a href="#"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> 회원정보</a></li>
				</ul>
			</div>
		</div>
		<div class="container">
			<div class="navbar-header">
				<img alt="ssafy"
					src="http://edu.ssafy.com/asset/images/header-logo.jpg">
			</div>
			<div id="navbar" class="navbar-collapse collapse"
				aria-expanded="false" style="height: 1px;">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">공지사항</a></li>
					<li><a href="#">상품 정보</a></li>
					<li><a href="#">베스트 섭취 정보</a></li>
					<li><a href="#">내 섭취 정보</a></li>
					<li><a href="#">예상 섭취 정보</a></li>
				</ul>
				<form class="navbar-form navbar-right">
					<input type="text" class="form-control" placeholder="Search...">
				</form>
			</div>
			<!--/.nav-collapse -->
		</div>
	</nav>

	<div class="container">
		<h2 class="text-center">제품 정보</h2>
		<br><br>
		<div class="row">
			<div id="image" class="col-md-3">
			</div>
			<div class="col-md-9">
				<table id="info" class="table">
					<tr>
						<th>제품명</th>
						<td id="name"></td>
					</tr>
					<tr>
						<th>제조사</th>
						<td id="maker"></td>
					</tr>
					<tr>
						<th>원재료</th>
						<td id="material"></td>
					</tr>
					<tr>
						<th>알레르기 성분</th>
						<td id="aller"></td>
					</tr>
				</table>
				<div class="row">
					<form>
						<div class="col-md-3">
							<label for="search">Quantity</label> <input type="number"
								class="form-control">
						</div>
					</form>
				</div>
				<br>
				<div class="btn-group" role="group" aria-label="...">
					<button id="add" type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-triangle-top" aria-hidden="true"></span>
						추가
					</button>
					<button type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-triangle-top" aria-hidden="true"></span>
						찜
					</button>
				</div>

			</div>
		</div>
	</div>

	<div class="container" id="nut">
		<h4>영양 정보</h4>
		<div class="row">
			<div class="col-md-6" id="donutchart" style="width: 550px; height: 500px;" ></div>
			<div class="col-md-6">
			
				<table id="nutr" class="table">
					<tr>
						<th>일일 제공량</th>
						<td id="wt"></td>
					</tr>
					<tr>
						<th>칼로리</th>
						<td id='cal'></td>
					</tr>
					<tr>
						<th>탄수화물</th>
						<td id='carbo'></td>
					</tr>
					<tr>
						<th>단백질</th>
						<td id='prot'></td>
					</tr>
					<tr>
						<th>지방</th>
						<td id='fat'></td>
					</tr>
					<tr>
						<th>당류</th>
						<td id='sugar'></td>
					</tr>
					<tr>
						<th>나트륨</th>
						<td id='na'></td>
					</tr>
					<tr>
						<th>콜레스테롤</th>
						<td id='col'></td>
					</tr>
					<tr>
						<th>포화 지방산</th>
						<td id='acid'></td>
					</tr>
					<tr>
						<th>트랜스지방</th>
						<td id='trans'></td>
					</tr>
				</table>
			</div>
		</div>
		
	</div>
	<div class="container">
		<hr>
		<footer>
			<h3>Find Us</h3>
			<hr>
			<p>
				<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span>
				(SSAFY) 서울시 강남구 ㅇㅇ로 멀티스퀘어<br> <span
					class="glyphicon glyphicon-earphone" aria-hidden="true"></span>
				1544-0000<br> <span class="glyphicon glyphicon-send"
					aria-hidden="true"></span> ssafy@ssafy.com
			</p>
			<div>Copyright</div>
		</footer>
	</div>
</body>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
 <script type="text/javascript">
    
 
  	let wt = sessionStorage.getItem('SERVING_WT');
  	let cal = sessionStorage.getItem('NUTR_CONT1');
  	let carbo = sessionStorage.getItem('NUTR_CONT2');
 	let prot = sessionStorage.getItem('NUTR_CONT3');
 	let fat = sessionStorage.getItem('NUTR_CONT4');
 	let sugar = sessionStorage.getItem('NUTR_CONT5');
 	let na = sessionStorage.getItem('NUTR_CONT6');
 	let col = sessionStorage.getItem('NUTR_CONT7');
 	let acid = sessionStorage.getItem('NUTR_CONT8');
 	let trans = sessionStorage.getItem('NUTR_CONT9');
 	
 	let aller = ["대두","땅콩","우유","게","새우","참치","연어","쑥","소고기","닭고기","돼지고기","복숭아","민들레","계란흰자"];

 	google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', '영양 정보'],
          ['칼로리', parseFloat(cal)],
          ['탄수화물', parseFloat(carbo)],
          ['단백질', parseFloat(prot)],
          ['지방', parseFloat(fat)],
          ['당류', parseFloat(sugar)],
          ['나트륨', parseFloat(na)],
          ['콜레스테롤', parseFloat(col)],
          ['포화지방산', parseFloat(acid)],
          ['트랜스지방', parseFloat(trans)],
        ]);

        var options = {
          pieHole: 0.5,
        };

        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        var formatter = new google.visualization.NumberFormat({pattern: '###.###'});
        formatter.format(data, 1);
        chart.draw(data, options);
      }

      $("#image").html($("#image").html() + '<img src="' + sessionStorage.getItem('img') + '" width="80%">');
      $("#name").html(sessionStorage.getItem('name'));
      $("#maker").html(sessionStorage.getItem('maker'));
      $("#material").html(sessionStorage.getItem('material'));
      
      let allerStr = "";
      for (var i = 0; i < aller.length; i++) {
    	  if(sessionStorage.getItem('material').match(aller[i])) {
    		  allerStr += aller[i] + ", ";
    	  }
		}
      $("#aller").html(allerStr);
      
      $("#wt").html(wt);
      $("#cal").html(cal);
      $("#carbo").html(carbo);
      $("#prot").html(prot);
      $("#fat").html(fat);
      $("#sugar").html(sugar);
      $("#na").html(na);
      $("#col").html(col);
      $("#acid").html(acid);
      $("#trans").html(trans);
		
      
    </script>
</html>